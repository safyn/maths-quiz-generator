{% extends 'home.html' %}
{% block body %}
<script>
$(document).ready(function(){
    $('a[data-toggle="tab"]').on('show.bs.tab', function(e) {
        localStorage.setItem('activeTab', $(e.target).attr('href'));
    });
    var activeTab = localStorage.getItem('activeTab');
    if(activeTab){
        $('#myTab a[href="' + activeTab + '"]').tab('show');
    }
});




</script>

<section style=" margin-left:10%; margin-right:20%; margin-top:5%">


	<div>
		<ul class="nav nav-tabs" id="myTab">
			<li class="nav-item">
				<a class="nav-link active" data-toggle="tab" href="#createGroupTab">Create Group</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" data-toggle="tab" href="#groupsTab">Teaching Groups</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" data-toggle="tab" href="#authorisationTab">Account Authorisation</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane fade show active" id="createGroupTab">
				<h3>Create Group</h3>
				<section style="margin-right:50%;margin-top:1%">
					<form class="form-horizontal" id="group" method="post">

						<label>Enter group name</label>
						<input class="form-control" name="groupName" type="text"><br><br>

						<input class="btn btn-info" form="group" type="submit" value="Create Group">

					</form>

				</section>
			</div>
			<div class="tab-pane fade" id="groupsTab">
				<h3>Select Groups</h3>
				<section style="margin-right:50%;margin-top:1%">
					<form class="form-check" id="selectGroups" method="post">

						<h5>Taught groups:</h5><br>

						{% for group in the_allGroups%}

						{% if group in the_teachersGroups %}

						<input checked name="group" type="checkbox" value="{{group}}">
						<label class="g" style="margin-left:10px">{{group}}</label><br>
						{% else %}
						<input name="group" type="checkbox" value="{{group}}">
						<label class="g" style="margin-left:10px">{{group}}</label><br>
						{% endif %}
						{% endfor %}


						<input class="btn btn-info" form="selectGroups" type="submit" value="Save groups">

					</form>

				</section>
			</div>
			<div class="tab-pane fade" id="authorisationTab">
				<section>
					<h3>Authorisation</h3>

					<form id="authorisationForm" method="POST">
						<div class="form-group"><h1 id="test"></h1>
							<label>Select a group:</label>
							<select class="studentGroup form-control" id="studentGroup"
							        name="studentGroup" onchange="this.form.submit() ">
								<option selected hidden  value="{{session['g']}}">{{session['g']}}</option>
								{% for tgroup in the_teachersGroups%}

								<option value="{{tgroup}}">{{tgroup}}</option>
								{% endfor %}
							</select>


						</div>

					</form>


				</section>
				<section>

						<form id="authentication" method="post">
							{% for student in the_students %}
								{% if student[2] == '1' %}
								<input name="userInformation" type="checkbox" checked value="{{student[3]}}">
								{% else %}
								<input name="userInformation" type="checkbox" for="userInformation" value="{{student[3]}}">
								{% endif %}
								<label>{{student[0]}} {{student[1]}}</label><br>
							{% endfor %}

							<input class="btn btn-info" type="submit" value="Authorize">
						</form>
				</section>
			</div>
		</div>
	</div>
</section>

{% endblock %}